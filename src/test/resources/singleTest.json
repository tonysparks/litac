{
    description: "Single Test",
    disabled: false,
    debug: true,
    disableLines: true,
    includeTypeInfos: true,
    program: '''                
        @include("assert.h");
        @foreign func assert(e:bool):void;
        
        %definitions%
        
        func main(len:i32, args:char**):i32 {
            %test%
        }
    '''
    tests: [ 
	    /*{ 
            name: "FuncPtr Cast",
            definitions: '''         
                typedef func() : i32 as Func;
                
                func test() : i32 {
                    return 4
                }
                
                func f(fn: Func) : i32 {
                    return fn()
                }
            ''',                       
            code: '''  
                 assert(f(test as (Func)) == 4)
            ''',             
        },
        { 
            name: "Address of Array Element",
            definitions: '''
                const array = [3]i32 {
                    1, 2, 3
                }
            ''',                       
            code: '''         
                var a = &array[0]
                assert(a != 1 as (void*))
            ''',                      
        },*/
        /*
        { 
            name: "Array Init from Typedef",
            definitions: '''
                typedef [3]f32 as Vec3;
                
                const array = Vec3 {
                    1.0f, 2.0f, 3.0f
                }
            ''',                       
            code: '''         
                var a = &array[0]
                assert(a != 1 as (void*))
                assert(array[0] == 1)
                assert(array[1] == 2)
                assert(array[2] == 3)
            ''',                      
        },*/
        
        // TODO!!! 
        /*{ 
            name: "Array Init from Typedef with designator",
            definitions: '''
                typedef [3]f32 as Vec3;
                
                const array = Vec3 {
                    [0] = 1.0f, 2.0f, 3.0f
                }
            ''',                       
            code: '''         
                var a = &array[0]
                assert(a != 1 as (void*))
                assert(array[0] == 1)
                assert(array[1] == 2)
                assert(array[2] == 3)
            ''',                      
        },*/
        /*
        { 
            name: "Array Init from Typedef in struct",
            definitions: '''
                typedef [3]f32 as Vec3;
                struct X {
                    v: Vec3
                }
                
                const x = X {
                    .v = Vec3 {1,2,3}
                }
            ''',                       
            code: '''                                         
                assert(x.v[0] == 1)
                assert(x.v[1] == 2)
                assert(x.v[2] == 3)
            ''',                      
        },
        
        { 
            name: "Array Init from Typedef in func call",
            definitions: '''
                typedef [3]f32 as Vec3;
                
                func test(v: Vec3) {
                    assert(v[0] == 1f)
                    assert(v[1] == 2f)
                    assert(v[2] == 3f)    
                }
            ''',                       
            code: '''                                     
                test(Vec3{1f, 2f, 3f})
            ''',                      
        },*/
        /*
        { 
            name: "Generic Array Overload",
            definitions: '''
                //import "io"
                //import "mem"
                @include("<stdio.h>");
                @include("<stdlib.h>");
                @include("<string.h>");
                
                @foreign public func printf(s:char const*, ...) : void;
                @foreign public func malloc(size: u64) : void*;
                @foreign public func memcpy (dest: void*, src: void const*, num: u64) : void*;
                                      
                struct Array<T> {
                    elements: T*
                }             
                
                func (a: Array<T>*) add<T>(index: i32, e: T) {
                #if (isArrayType(scope.getSymbol("e")?type)) 
                
                    memcpy(&a.elements[index], e as (void*), sizeof(:T)) 
                #else
                    v.elements[index] = e 
                #end
                }
                
                func test<T>(v: T, index: i32) : f32 {
                    return v[index]
                }
            ''',                       
            code: '''       
                var v = Array<[3]f32>{}
                v.elements = malloc(sizeof(:[3]f32) * 10) as ([3](f32)*)
                
                v.add(0, [3]f32{1,2,3})
                
               // v.elements[0] = [3]f32{1,2,3}
               // v.elements[1] = [3]f32{4,5,6} 
                
              //  printf("%f", v.elements[0][1])
                
                //var a = [3]f32 {2.0f, 4.0f, 6.0f}
                //var b = [2]f32 {1.0f, 3.0f}
                
                //assert(test(b, 1) == 3.0f)
                //assert(test(a, 2) == 6.0f)                
            ''',                      
        },*/
        
        /*
        {
            name: "Body If Simple",
            definitions: '''                
                func test<T>(i: T) : T {
                    #if isBool(scope.getSymbol("i")?type)
                        return i
                    #elseif isFloat(scope.getSymbol("i")?type)
                        return i + 4.4f
                    #elseif isInteger(scope.getSymbol("i")?type)
                        return i + 4
                    #else 
                        return i
                    #end 
                }                           
            ''',            
            code: '''
                var x : i32 = test<i32>(1)
                var y : f32 = test<f32>(3.0f)
                var z : bool = test<bool>(true)
                
                assert(x == 5)
                assert(y == 7.4f)
                assert(z == true)                  
            '''
        },*/
        /*
        {
            name: "Body If MultiLine",
            definitions: '''                
                func test<T>(i: T) : T {
                    #if isBool(scope.getSymbol("i")?type) &&\
                        isInteger(scope.getSymbol("i")?type ) 
                        return i
                    #elseif isFloat(scope.getSymbol("i")?type)
                        return i + 4.4f                    
                    #else
                        return i + 6                    
                    #end 
                }                           
            ''',            
            code: '''
                var x : i32 = test<i32>(1)
                var y : f32 = test<f32>(3.0f)
                var z : bool = test<bool>(true)
                
                assert(x == 7)
                assert(y == 7.4f)
                assert(z == true)                  
            '''
        },
        */
        /*
        { 
            name: "Array Return Decay",
            definitions: '''
                typedef [3]f32 as Vec3;
                
                const array = Vec3 {
                    1.0f, 2.0f, 3.0f
                }
                
                func test(v: Vec3) : Vec3 {
                    return v
                }
            ''',                       
            code: '''         
                var a = test(array)
                assert(a[0] == 1)
                assert(a[1] == 2)
                assert(a[2] == 3)
            ''',                      
        },*/
        
        /** Do we want to support??
        { 
            name: "Array2d Return Decay",
            definitions: '''
                typedef [1][3]f32 as Vec3;
                
                const array = [1][3]f32 {
                    [3]f32 {1.0f, 2.0f, 3.0f}
                }
                
                func test(v: Vec3) : Vec3 {
                    return v // return an array, not valid/safe C
                }
            ''',                       
            code: '''         
                var a = test(array)
                assert(a[0][0] == 1)
                assert(a[0][1] == 2)
                assert(a[0][2] == 3)
            ''',                      
        },
        {
            name: "Parsing",
            definitions: '''                
                
                            
            ''',                       
            code: '''                
                test("a");
                test("b");                                          
            ''',
            error: "Unknown type 'test'"                      
        },*/
        // Still broken
        /*        
        {
            name: "Doc Test",
            genDoc: false,
            definitions: '''
                import "array"
                
                @doc("""
                    Module documentation
                    <i>this is an italic test</i>
                """);
            
                @doc("""
                    some documentation
                """)
                public var a = 1
                
                @doc("""
                    *b* is some other stuff
                """)
                public const b = 2
                const z = 3
                
                public typedef i32 as Int;
                
                public struct X {
                    x: Int
                    v: char
                }
                
                public union Y {
                    z: i32
                    x: X
                }
                
                @doc("""
                    E is a special enum
                """)
                public enum E {
                    @doc("not sure this will work?")
                    STATE_X,
                    STATE_Y
                }
                
                @doc("""
                This function does stuff 
                
                *a* the input to the fuction 
                
                *returns* the return of the function
                """)
                public func test(a: i32) : f32 {
                    return 0
                }
            ''',                       
            code: '''                
                                     
            ''',                      
        },*//*
        {
            name: "Var null inference bug",
            definitions: '''                
                
                            
            ''',                       
            code: '''                
                var x = null
            ''',
            error: "invalid variable declaration, can't infer type from 'null' for 'x' variable"                      
        },
        {
            name: "Const null inference bug",
            definitions: '''                
                
                            
            ''',                       
            code: '''                
                const x = null
            ''',
            error: "invalid variable declaration, can't infer type from 'null' for 'x' variable"                      
        },*/
        /*{
            name: "Cast CharArray to VoidPtr", 
            definitions: '''
                func test(v: void*) {
                }
                
            ''',                       
            code: '''
                var c = [4] char{'\0', '\0', '\0', '\0'};
                // var c = [4] char;
                test(c as (void*))
            ''',
        },*/      
        {
            name: "Generics Expr", 
            definitions: '''
                struct Bucket<T: type, Size: i32> {
                    elements: [Size]T
                    capacity: i32 = Size
                    length: i32 = 0
                }
                /*                
                func (b: Bucket<T, Size: i32>*) add<T, Size: i32>(e: T) : bool {
                    if(b.length + 1 >= b.capacity) {
                        return false
                    }
                    b.elements[b.length] = e
                    b.length += 1
                    
                    return true
                }*/
                
            ''',                       
            code: '''
                const X = 23
                var b = Bucket<i32, 12> {}
                // this is ambigious
                var b = Bucket<i32, X> {}
                
            ''',
        },
        
        
        
    ]
}